<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../styles/output.css">
  <title>Drivers</title>
  <style>
    /* Keep the sidebar fixed */
    aside {
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      width: 16rem; /* Sidebar width */
      z-index: 10;
    }

    /* Adjust content to avoid overlapping with sidebar */
    .content {
      margin-left: 16rem; /* Sidebar width */
    }

    /* Hide Add Driver form initially */
    #add-driver-form-container {
      display: none;
    }
  </style>
</head>
<body class="h-screen bg-gray-50 flex">
  <!-- Sidebar -->
  <aside class="bg-gray-900 text-white flex flex-col">
    <div class="flex items-center justify-center h-16 border-b border-gray-700">
      <img src="https://tailwindui.com/plus/img/logos/mark.svg?color=indigo&shade=600" alt="Logo" class="h-8 w-auto">
    </div>
    <nav class="flex-1 px-2 py-4 space-y-2">
      <a href="dashboard.html" class="flex items-center px-4 py-2 text-sm font-medium rounded-lg hover:bg-gray-800">
        <svg class="w-5 h-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M11.293 3.293a1 1 0 0 1 1.414 0l6 6 2 2a1 1 0 0 1-1.414 1.414L19 12.414V19a2 2 0 0 1-2 2h-3a1 1 0 0 1-1-1v-3h-2v3a1 1 0 0 1-1 1H7a2 2 0 0 1-2-2v-6.586l-.293.293a1 1 0 0 1-1.414-1.414l2-2 6-6Z"/>
        </svg>
        Dashboard
      </a>
      <a href="drivers.html" class="flex items-center px-4 py-2 text-sm font-medium rounded-lg bg-indigo-600">
        <svg class="w-5 h-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M16 19h4a1 1 0 0 0 1-1v-1a3 3 0 0 0-3-3h-2m-2.236-4a3 3 0 1 0 0-4M3 18v-1a3 3 0 0 1 3-3h4a3 3 0 0 1 3 3v1a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1Zm8-10a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/>
        </svg>
        Drivers
      </a>
    </nav>
  </aside>

  <!-- Main Content -->
  <div class="content flex-1 flex flex-col">
    <!-- Header -->
    <header class="flex items-center justify-between px-6 py-4 bg-white shadow">
      <input
        id="search-bar"
        type="text"
        placeholder="Search..."
        class="w-1/3 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-600"
      />
      <div class="flex items-center space-x-4">
        <div id="profile-initials" class="flex items-center justify-center w-10 h-10 bg-indigo-500 text-white rounded-full">HB</div>
        <button class="px-4 py-2 bg-red-500 text-white text-sm font-medium rounded-lg hover:bg-red-600 focus:outline-none">
          Logout
        </button>
      </div>
    </header>

    <!-- Sorting Toolbar -->
    <div class="flex justify-between items-center px-6 py-2 bg-white shadow">
      <h2 class="text-xl font-semibold text-gray-800">Drivers</h2>
      <div class="flex space-x-2">
        <button id="sort-name" class="px-4 py-2 text-sm border rounded-full">Sort by Name</button>
        <button id="sort-license" class="px-4 py-2 text-sm border rounded-full">Sort by License</button>
        <button id="sort-availability" class="px-4 py-2 text-sm border rounded-full">Sort by Availability</button>
        <button id="reset-filters" class="px-4 py-2 text-sm border rounded-full bg-red-100">Reset Filters</button>
      </div>
    </div>

    <!-- Add Driver Button -->
    <div class="px-6 py-4">
        <button id="toggle-add-driver" class="px-4 py-2 bg-indigo-600 text-black font-medium rounded-lg border border-indigo-800 hover:bg-indigo-700">
            Add New Driver
          </button>
    </div>
    <div class="driver-details-section px-6 py-4">
      <h2 class="text-lg font-semibold">Search Driver Details</h2>
      <div class="flex items-center space-x-2">
        <input 
          type="number" 
          id="driver-id-input" 
          class="px-4 py-2 border rounded" 
          placeholder="Enter Driver ID"
        />
        <button 
          onclick="fetchDriverDetails(document.getElementById('driver-id-input').value)"
          class="px-4 py-2 bg-indigo-600 text-black rounded hover:bg-indigo-700">
          Search
        </button>
      </div>
      <div id="driver-details" class="mt-4"></div>
    </div>
    
    <div class="driver-completed-jobs-section px-6 py-4">
      <h2 class="text-lg font-semibold">Completed Jobs</h2>
      <div class="flex items-center space-x-2">
        <input 
          type="number" 
          id="driver-id-input" 
          class="px-4 py-2 border rounded" 
          placeholder="Enter Driver ID"
        />
        <button 
          onclick="fetchCompletedJobs(document.getElementById('driver-id-input').value)"
          class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
          Calculate Completed Jobs
        </button>
      </div>
      <div id="completed-jobs-output" class="mt-4"></div>
    </div>
    
      
      
    <!-- Add Driver Form -->
    <div id="add-driver-form-container" class="px-6 py-4 bg-white shadow rounded-lg">
      <h3 class="text-lg font-semibold mb-4">Add New Driver</h3>
      <form id="add-driver-form" class="grid grid-cols-1 gap-4">
        <input type="text" id="F_Name" name="F_Name" placeholder="First Name" required class="px-4 py-2 border rounded-md" />
        <input type="text" id="L_Name" name="L_Name" placeholder="Last Name" required class="px-4 py-2 border rounded-md" />
        <input type="text" id="License_Type" name="License_Type" placeholder="License Type" required class="px-4 py-2 border rounded-md" />
        <select id="Availability" name="Availability" required class="px-4 py-2 border rounded-md">
          <option value="1">Available</option>
          <option value="0">Unavailable</option>
        </select>
        <input type="text" id="Phone_No" name="Phone_No" placeholder="Phone Number" required class="px-4 py-2 border rounded-md" />
        <input type="number" id="Dispatcher_ID" name="Dispatcher_ID" placeholder="Dispatcher ID" required class="px-4 py-2 border rounded-md" />
        <button type="submit" class="px-4 py-2 bg-indigo-600 text-black rounded-lg hover:bg-indigo-700">Add Driver</button>
      </form>
    </div>

    <!-- Pagination Controls -->
    <div class="flex justify-center items-center mt-4">
      <button id="prev-page" class="px-4 py-2 bg-gray-300 rounded-md">Previous</button>
      <span id="current-page" class="px-4">Page 1</span>
      <button id="next-page" class="px-4 py-2 bg-gray-300 rounded-md">Next</button>
    </div>

    <!-- Drivers Table -->
    <main class="p-6 bg-gray-50">
        <table class="w-full bg-white border rounded-lg">
          <thead class="bg-gray-100">
            <tr>
              <th class="px-6 py-3">Driver ID</th>
              <th class="px-6 py-3">First Name</th>
              <th class="px-6 py-3">Last Name</th>
              <th class="px-6 py-3">License Type</th>
              <th class="px-6 py-3">Availability</th>
              <th class="px-6 py-3">Phone Number</th>
              <th class="px-6 py-3">Dispatcher ID</th>
              <th class="px-6 py-3">Actions</th>
            </tr>
          </thead>
          <tbody id="drivers-table-body">
            <!-- Rows will be dynamically populated here -->
          </tbody>
        </table>
      </main>
  </div>

  <script>
    // Toggle Add Driver Form
    document.getElementById('toggle-add-driver').addEventListener('click', () => {
      const formContainer = document.getElementById('add-driver-form-container');
      formContainer.style.display = formContainer.style.display === 'none' ? 'block' : 'none';
    });
  </script>
  <script src="../js/drivers.js"></script>
</body>
</html>
